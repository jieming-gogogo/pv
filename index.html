<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>生物反应器 P/V 计算器</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}
    body{background:linear-gradient(135deg,#1a2a6c,#2a4ab4,#1a2a6c);background-size:400% 400%;animation:gradientBG 15s ease infinite;color:#333;min-height:100vh;padding:20px}
    @keyframes gradientBG{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}
    .container{max-width:800px;margin:0 auto;padding:20px}
    header{text-align:center;margin-bottom:30px;color:white;padding:25px;background:rgba(0,0,0,.3);border-radius:15px;backdrop-filter:blur(10px)}
    h1{font-size:clamp(1.8rem,4vw,2.5rem);margin-bottom:10px}
    .calculator{background:rgba(255,255,255,.95);border-radius:15px;padding:30px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
    label{display:block;margin:.6em 0 .2em;font-weight:600;color:#444;font-size:clamp(1rem,2.5vw,1.1rem)}
    select,input{width:100%;padding:14px;border:2px solid #ddd;border-radius:10px;font-size:16px;background:white}
    button{width:100%;max-width:480px;margin:.5em 0;padding:15px;border:none;border-radius:10px;font-weight:600;cursor:pointer}
    .btn-calculate{background:linear-gradient(to right,#1a2a6c,#2a4ab4);color:white;font-size:clamp(1rem,2.5vw,1.1rem)}
    .btn-reset{background:linear-gradient(to right,#b21f1f,#d9534f);color:white;font-size:clamp(1rem,2.5vw,1.1rem)}
    .result{margin-top:25px;padding:20px;background:#e9f7fe;border-left:5px solid #1a2a6c;border-radius:10px;font-weight:700;color:#1a2a6c}
    @media(max-width:480px){button{width:100%}}
  </style>
</head>
<body>
  <div class="container">
    <header><h1>🧪 生物反应器 P/V 计算器</h1></header>

    <div class="calculator">
      <label>反应器类型
        <select id="type">
          <option value="">--请选择--</option>
          <option value="GE-XDR500">GE-XDR500</option>
          <option value="Hyclone-SUB100">Hyclone-SUB100</option>
          <option value="Hyclone-SUB500">Hyclone-SUB500</option>
          <option value="Sartorius-200">Sartorius-200</option>
          <option value="Applikon-3L">Applikon-3L</option>
          <option value="Applikon-15L">Applikon-15L</option>
          <option value="Sartorius-50">Sartorius-50</option>
          <option value="BBI-3L">BBI-3L</option>
          <option value="GE-XDR50">GE-XDR50</option>
          <option value="Sartorius-500">Sartorius-500</option>
        </select>
      </label>

      <label>反应体积 (L)<input type="number" id="volume" placeholder="例如 100" min="1" step="0.1"></label>

      <label>功率输入 P/V (W/m³)<input type="number" id="pv" placeholder="留空则计算"></label>
      <label>搅拌转速 (RPM)<input type="number" id="rpm" placeholder="留空则计算"></label>

      <button class="btn-calculate" onclick="calc()">📝 计算参数</button>
      <button class="btn-reset" onclick="reset()">🔄 重置输入</button>

      <div id="result" style="margin-top:20px;font-weight:700;color:#1a2a6c">等待计算...</div>
    </div>
  </div>

  <script>
    const data = {"GE-XDR500":{ne:1.15,d:0.2667},"Hyclone-SUB100":{ne:2.1,d:0.146},"Hyclone-SUB500":{ne:2.1,d:0.251},"Sartorius-200":{ne:1.1,d:0.225},"Applikon-3L":{ne:1.5,d:0.045},"Applikon-15L":{ne:1.5,d:0.075},"Sartorius-50":{ne:1.4,d:0.143},"BBI-3L":{ne:0.7,d:0.052},"GE-XDR50":{ne:1.15,d:0.21},"Sartorius-500":{ne:1.3,d:0.31}};
    const ρ = 1000;

    function calc() {
      const t = document.getElementById('type').value;
      const V = parseFloat(document.getElementById('volume').value);
      const pv = parseFloat(document.getElementById('pv').value);
      const rpm = parseFloat(document.getElementById('rpm').value);
      const res = document.getElementById('result');
      if (!t || !V) { res.textContent = '请选择反应器并输入体积'; return; }
      const {ne, d} = data[t], V_m3 = V / 1000;
      if (pv && !rpm) {
        const n = Math.pow(pv * V_m3 / (ne * ρ * Math.pow(d, 5)), 1/3), rpmCalc = n * 60;
        document.getElementById('rpm').value = rpmCalc.toFixed(1);
        res.textContent = `转速 ≈ ${rpmCalc.toFixed(1)} RPM`;
      } else if (rpm && !pv) {
        const n = rpm / 60, pvCalc = (ne * ρ * Math.pow(n, 3) * Math.pow(d, 5)) / V_m3;
        document.getElementById('pv').value = pvCalc.toFixed(2);
        res.textContent = `P/V ≈ ${pvCalc.toFixed(2)} W/m³`;
      } else {
        res.textContent = '请只填 P/V 或转速其一';
      }
    }

    function reset() {
      [...document.querySelectorAll('#type,#volume,#pv,#rpm')].forEach(el => el.value = '');
      document.getElementById('result').textContent = '等待计算...';
    }
  </script>
</body>
</html>
