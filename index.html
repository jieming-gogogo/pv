<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>P/V 计算器</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <style>
    *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}
    html,body{height:100%;margin:0}
    body{
      display:flex;
      flex-direction:column;
      min-height:100vh;
      padding:max(8px,env(safe-area-inset-top)) max(12px,env(safe-area-inset-right)) max(8px,env(safe-area-inset-bottom)) max(12px,env(safe-area-inset-left));
      background:linear-gradient(135deg,#eef2f7,#ffffff);
      color:#333;
      font-size:clamp(15px,2.5vw,18px);
    }
    header{flex-shrink:0;text-align:center;padding:.5em 0}
    main{flex:1 1 auto;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:0 .5em}
    label{display:block;margin:.6em 0 .2em;font-weight:600}
    select,input{
      width:100%;
      max-width:480px;
      padding:.6em .8em;
      border:1px solid #bbb;
      border-radius:6px;
      font-size:inherit;
      background:#fff;
    }
    button{
      width:100%;
      max-width:480px;
      margin:.3em 0;
      padding:.65em;
      border:none;
      border-radius:6px;
      background:#007bff;
      color:#fff;
      font-size:inherit;
      cursor:pointer;
    }
    button:hover{background:#0056b3}
    .result{
      width:100%;
      max-width:480px;
      margin:.8em 0;
      padding:.8em;
      border-left:4px solid #007bff;
      background:#e9f7fe;
      word-break:break-word;
    }
    footer{
      flex-shrink:0;
      text-align:center;
      font-size:.8em;
      color:#777;
      padding:.5em;
    }
  </style>
</head>
<body>
  <header><h1>生物反应器 P/V 计算器</h1></header>

  <main>
    <label>反应器类型
      <select id="type">
        <option value="">--请选择--</option>
        <option value="GE-XDR500">GE-XDR500</option>
        <option value="Hyclone-SUB100">Hyclone-SUB100</option>
        <option value="Hyclone-SUB500">Hyclone-SUB500</option>
        <option value="Sartorius-200">Sartorius-200</option>
        <option value="Applikon-3L">Applikon-3L</option>
        <option value="Applikon-15L">Applikon-15L</option>
        <option value="Sartorius-50">Sartorius-50</option>
        <option value="BBI-3L">BBI-3L</option>
        <option value="GE-XDR50">GE-XDR50</option>
        <option value="Sartorius-500">Sartorius-500</option>
      </select>
    </label>

    <label>反应体积 (L)<input type="number" id="V" placeholder="例如 100"></label>
    <label>P/V (W/m³)<input type="number" id="pv" placeholder="留空则计算"></label>
    <label>转速 (RPM)<input type="number" id="rpm" placeholder="留空则计算"></label>

    <button onclick="calc()">计算</button>
    <button onclick="reset()">重置</button>

    <div id="res" class="result">等待计算…</div>
  </main>

  <footer>自适应 · 可安装到桌面</footer>

  <script>
    const data={
      "GE-XDR500":{ne:1.15,d:0.2667},"Hyclone-SUB100":{ne:2.1,d:0.146},
      "Hyclone-SUB500":{ne:2.1,d:0.251},"Sartorius-200":{ne:1.1,d:0.225},
      "Applikon-3L":{ne:1.5,d:0.045},"Applikon-15L":{ne:1.5,d:0.075},
      "Sartorius-50":{ne:1.4,d:0.143},"BBI-3L":{ne:0.7,d:0.052},
      "GE-XDR50":{ne:1.15,d:0.21},"Sartorius-500":{ne:1.3,d:0.31}
    };
    const ρ=1000;
    function calc(){
      const t=document.getElementById('type').value,
            V=parseFloat(document.getElementById('V').value),
            pv=parseFloat(document.getElementById('pv').value),
            rpm=parseFloat(document.getElementById('rpm').value),
            res=document.getElementById('res');
      if(!t||!V){res.textContent='请选择反应器并输入体积';return}
      const {ne,d}=data[t],V_m3=V/1000;
      if(pv&&!rpm){
        const n=Math.pow(pv*V_m3/(ne*ρ*Math.pow(d,5)),1/3),rpm_calc=n*60;
        document.getElementById('rpm').value=rpm_calc.toFixed(1);
        res.textContent=`转速 ≈ ${rpm_calc.toFixed(1)} RPM`;
      }else if(rpm&&!pv){
        const n=rpm/60,pv_calc=(ne*ρ*Math.pow(n,3)*Math.pow(d,5))/V_m3;
        document.getElementById('pv').value=pv_calc.toFixed(2);
        res.textContent=`P/V ≈ ${pv_calc.toFixed(2)} W/m³`;
      }else{res.textContent='请只填 P/V 或转速其一';}
    }
    function reset(){
      ['type','V','pv','rpm'].forEach(id=>document.getElementById(id).value='');
      document.getElementById('res').textContent='等待计算…';
    }
  </script>
</body>
</html>
